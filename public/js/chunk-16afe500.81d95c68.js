(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16afe500"],{"051b":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Layout",[s("div",{staticClass:"d-flex"},[s("h1",{staticClass:"text-h4"},[e._v("المستخدمين")]),s("v-spacer"),s("v-btn",{staticClass:"mb-1 ms-2",attrs:{color:"primary",dark:""},on:{click:function(t){e.formDialog=!0}}},[s("v-icon",{staticClass:"d-none d-sm-block me-2"},[e._v("mdi-plus")]),s("v-icon",{staticClass:"d-sm-none d-block"},[e._v("mdi-plus")]),s("span",{staticClass:"d-none d-sm-block"},[e._v(" إظافة مستخدم ")])],1)],1),s("v-divider",{staticClass:"my-4"}),s("v-card",[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-text-field",{attrs:{label:"بحث",dense:"",outlined:"","single-line":"","hide-details":"","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"700px"},on:{"click:outside":e.closeForm},model:{value:e.formDialog,callback:function(t){e.formDialog=t},expression:"formDialog"}},[s("user-form",{ref:"userForm",attrs:{user:e.updateUser,"is-edit":e.isEditMode,"form-title":e.formTitle},on:{canceled:e.closeForm,submited:e.saveUser}})],1)],1)],1),s("v-data-table",{staticClass:"mt-8 elevation-16",attrs:{headers:e.headers,loading:e.isLoading,items:e.users,"sort-by":"id","sort-desc":"",search:e.search},scopedSlots:e._u([{key:"item.actions",fn:function(t){var i=t.item;return[s("v-menu",{attrs:{"offset-y":"","close-on-click":"",origin:"center center",transition:"scale-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[s("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",a,!1),i),[s("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[s("v-list",{attrs:{dense:""}},[s("v-list-item-group",{attrs:{color:"primary"}},[s("v-list-item",{on:{click:function(t){return e.editUser(i)}}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-pencil")])],1),s("v-list-item-content",[s("v-list-item-title",[e._v(" تعديل ")])],1)],1)],1),s("v-list-item-group",{attrs:{color:"primary"}},[s("v-list-item",{on:{click:function(t){return e.userPermissions(i)}}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-account-key")])],1),s("v-list-item-content",[s("v-list-item-title",[e._v(" الصلاحيات ")])],1)],1)],1),s("v-list-item-group",{attrs:{color:"error"}},[s("v-list-item",{on:{click:function(t){return e.deleteUser(i)}}},[s("v-list-item-icon",[s("v-icon",{attrs:{color:"error"}},[e._v("mdi-delete")])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"error--text"},[e._v("حذف")])],1)],1)],1)],1)],1)]}}],null,!0)}),s("v-dialog",{attrs:{"max-width":"700px"},on:{"click:outside":e.closePermForm},model:{value:e.permissionsDialog,callback:function(t){e.permissionsDialog=t},expression:"permissionsDialog"}},[s("permissions-form",{ref:"permissionsForm",attrs:{user:e.permissionsData,"is-edit":e.isEditMode},on:{canceled:e.closePermForm,submited:e.savePermissions}})],1),s("confirm-dailog",{ref:"confirm"})],1)},a=[],r=(s("96cf"),s("1da1")),n=s("5530"),o=s("6a9b"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-form",{ref:"userForm",on:{submit:function(t){return t.preventDefault(),e.submited(t)}},model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[s("v-card-title",[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-text-field",{attrs:{rules:e.rules.name,dense:"",label:"اسم المستخدم",outlined:"",required:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-text-field",{attrs:{rules:e.rules.email,dense:"",type:"email",label:"البريد الإلكتروني",outlined:"",required:""},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1)],1),s("v-row",[s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-text-field",{attrs:{dense:"",label:"المسمى الوظيفي",outlined:""},model:{value:e.formData.job_title,callback:function(t){e.$set(e.formData,"job_title",t)},expression:"formData.job_title"}})],1),s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-text-field",{attrs:{rules:e.rules.phone,dense:"",label:"رقم التلفون",outlined:"",required:""},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1)],1),s("v-row",[s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-select",{attrs:{dense:"",label:"الفرع",items:e.branchList,outlined:"",required:""},model:{value:e.formData.branch_id,callback:function(t){e.$set(e.formData,"branch_id",t)},expression:"formData.branch_id"}})],1),s("v-col",{staticClass:"py-0",attrs:{sm:"6",cols:"12"}},[s("v-text-field",{attrs:{type:e.showPass?"text":"password",rules:e.rules.password,dense:"",label:"كلمة المرور","append-icon":e.showPass?"mdi-eye":"mdi-eye-off",outlined:"",required:""},on:{"click:append":function(t){e.showPass=!e.showPass}},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("اغلاق")]),s("v-btn",{attrs:{color:"blue darken-1",type:"submit",disabled:!e.validForm,text:""}},[e._v("حفظ")])],1)],1)],1)},c=[],u=(s("d81d"),s("b0c0"),s("d14d")),d={name:"UserForm",props:{formTitle:{type:String,default:"Make new user"},user:{type:Object,default:function(){return{name:"",email:"",phone:"",job_title:"",password:"",branch_id:""}}},isEdit:{type:Boolean,default:!1}},data:function(){return{validForm:!1,showPass:!1,branches:[]}},computed:{rules:function(){var e=this.isEdit?[]:[function(e){return!!e||"كلمة المرور مطلوبة"}];return{name:[function(e){return!!e||"اسم المستخدم مطلوب"}],email:[function(e){return!!e||"بريد إلكتروني مطلوب"},function(e){return/.+@.+\..+/.test(e)||"يرجى إدخال بريد إلكتروني صحيح"}],phone:[function(e){return!!e||"رقم التلفون مطلوب"}],branch_id:[function(e){return!!e||"يرجى تحديد الفرع"}],password:e}},formData:function(){return this.user},branchList:function(){return this.branches.map((function(e){return{value:e.id,text:e.name}}))}},created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadBranches();case 3:e.branches=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$VAlert.error("");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},methods:{loadBranches:u["g"].getBranchesAction,submited:function(){this.$emit("submited",{name:this.formData.name,email:this.formData.email,phone:this.formData.phone,job_title:this.formData.job_title,branch_id:this.formData.branch_id,password:this.formData.password,password_confirmation:this.formData.password}),this.close()},close:function(){this.$refs.userForm.reset(),this.$emit("canceled")},reset:function(){this.$refs.userForm.reset()}}},m=d,p=s("2877"),f=s("6544"),h=s.n(f),v=s("8336"),b=s("b0af"),x=s("99d9"),k=s("62ad"),D=s("ce7e"),g=s("4bd4"),V=s("0fd9"),w=s("b974"),C=s("2fa4"),_=s("8654"),y=Object(p["a"])(m,l,c,!1,null,"71ab0f84",null),$=y.exports;h()(y,{VBtn:v["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:x["c"],VCol:k["a"],VDivider:D["a"],VForm:g["a"],VRow:V["a"],VSelect:w["a"],VSpacer:C["a"],VTextField:_["a"]});var F=s("fb0c"),j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-form",{ref:"permissionsForm",on:{submit:function(t){return t.preventDefault(),e.submited(t)}},model:{value:e.validForm,callback:function(t){e.validForm=t},expression:"validForm"}},[s("v-card-title",[s("span",{staticClass:"headline"},[e._v("صلاحيات المستخدم")])]),s("v-divider"),s("v-container",{staticClass:"pa-5",attrs:{fluid:""}},[s("label",{staticClass:"d-block mb-6 ms-1"},[e._v("حدد صلاحيات المستخدم")]),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("v-checkbox",{attrs:{label:"لوحة التحكم",value:"dashboard","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}}),s("v-checkbox",{attrs:{label:"العملاء",value:"agents","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}}),s("v-checkbox",{attrs:{label:"التقارير",value:"reports","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("v-checkbox",{attrs:{label:"العمليات",value:"invoices","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}}),s("v-checkbox",{attrs:{label:"الفحوصات",value:"tests","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}}),s("v-checkbox",{attrs:{label:"المستخدمين",value:"users","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}})],1),s("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[s("v-checkbox",{attrs:{label:"الفروع",value:"branches","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}}),s("v-checkbox",{attrs:{label:"الشركات",value:"companies","hide-details":""},model:{value:e.formData.permissions,callback:function(t){e.$set(e.formData,"permissions",t)},expression:"formData.permissions"}})],1)],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("اغلاق")]),s("v-btn",{attrs:{color:"blue darken-1",type:"submit",disabled:!e.validForm,text:""}},[e._v("حفظ")])],1)],1)],1)},I=[],A={name:"PermissionsForm",props:{user:{type:Object,default:function(){return{user_id:"",permissions:[]}}},isEdit:{type:Boolean,default:!1}},data:function(){return{validForm:!1}},computed:{rules:function(){return{permissions:[function(e){return!!e||"اسم المستخدم مطلوب"}]}},formData:function(){return this.user}},methods:{submited:function(){this.$emit("submited",{user_id:this.user.user_id,permissions:this.formData.permissions}),this.close()},close:function(){this.$refs.permissionsForm.reset(),this.$emit("canceled")},reset:function(){this.$refs.permissionsForm.reset()}}},O=A,S=(s("d3b7"),s("25f0"),s("6ca7"),s("ec29"),s("9d26")),E=s("c37a"),U=s("fe09"),L=U["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},E["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(e){var t=this;this.$nextTick((function(){return t.inputIndeterminate=e}))},inputIndeterminate:function(e){this.$emit("update:indeterminate",e)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(S["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(n["a"])(Object(n["a"])({},this.attrs$),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}}),P=s("a523"),R=Object(p["a"])(O,j,I,!1,null,"78a4554c",null),M=R.exports;h()(R,{VBtn:v["a"],VCard:b["a"],VCardActions:x["a"],VCardTitle:x["c"],VCheckbox:L,VCol:k["a"],VContainer:P["a"],VDivider:D["a"],VForm:g["a"],VRow:V["a"],VSpacer:C["a"]});var T={name:"Users",components:{Layout:o["a"],UserForm:$,ConfirmDailog:F["a"],PermissionsForm:M},data:function(){return{search:"",isLoading:!1,formDialog:!1,permissionsDialog:!1,isEditMode:!1,updateUser:{name:"",email:"",phone:"",job_title:"",branch_id:"",password:""},permissionsData:{user_id:"",permissions:""}}},computed:Object(n["a"])(Object(n["a"])({},u["s"]),{},{headers:function(){return[{text:"الرقم",value:"id"},{text:"اسم المستخدم",value:"name"},{text:"رقم التلفون",value:"phone"},{text:"البريد الإلكتروني",value:"email"},{text:"الفرع",value:"branch.name"},{text:"إدارة",value:"actions",sortable:!1}]},formTitle:function(){return this.isEditMode?"تعديل مستخدم":"اظافة مستخدم"}}),created:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,e.getUsersAction();case 4:e.isLoading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$VAlert.error("عذرا حدث خطأ!"),e.isLoading=!1;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},u["r"]),u["m"]),{},{editUser:function(e){this.isEditMode=!0,Object.assign(this.updateUser,e),this.formDialog=!0},deleteUser:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.$refs.confirm.open("حذف مستخدم","هل انت متأكد من حذف هذا المستخدم؟");case 3:if(i=s.sent,!i){s.next=8;break}return s.next=7,t.deleteUserAction(e.id);case 7:t.$VAlert.success("تم حذف المستخدم");case 8:s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](0),t.$VAlert.error("عذرا حدث خطأ!");case 13:case"end":return s.stop()}}),s,null,[[0,10]])})))()},saveUser:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,!t.isEditMode){s.next=7;break}return i=t.updateUser.id,s.next=5,t.editUserAction({userData:e,userId:i});case 5:s.next=9;break;case 7:return s.next=9,t.saveUserAction(e);case 9:t.$VAlert.success("تم حفظ المستخدم"),s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](0),t.$VAlert.error("عذرا حدث خطأ!");case 15:case"end":return s.stop()}}),s,null,[[0,12]])})))()},userPermissions:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.getUserPermissions(e.id);case 3:i=s.sent,a=i.data,Object.assign(t.permissionsData,a),t.isEditMode=!0,s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),Object.assign(t.permissionsData,{user_id:e.id,permissions:[]});case 12:t.permissionsDialog=!0;case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},savePermissions:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,!t.isEditMode){s.next=6;break}return s.next=4,t.editUserPermissions(e);case 4:s.next=8;break;case 6:return s.next=8,t.saveUserPermissions(e);case 8:t.$VAlert.success("تم حفظ المستخدم"),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),t.$VAlert.error("عذرا حدث خطأ!");case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},closeForm:function(){this.$refs.userForm.reset(),this.isEditMode=!1,this.formDialog=!1},closePermForm:function(){this.$refs.permissionsForm.reset(),this.isEditMode=!1,this.permissionsDialog=!1}})},B=T,q=s("8fea"),z=s("169a"),J=s("132d"),K=s("8860"),G=s("da13"),H=s("5d23"),N=s("1baa"),Q=s("34c3"),W=s("e449"),X=s("71d9"),Y=Object(p["a"])(B,i,a,!1,null,"0bed222b",null);t["default"]=Y.exports;h()(Y,{VBtn:v["a"],VCard:b["a"],VDataTable:q["a"],VDialog:z["a"],VDivider:D["a"],VIcon:J["a"],VList:K["a"],VListItem:G["a"],VListItemContent:H["a"],VListItemGroup:N["a"],VListItemIcon:Q["a"],VListItemTitle:H["b"],VMenu:W["a"],VSpacer:C["a"],VTextField:_["a"],VToolbar:X["a"]})},5311:function(e,t,s){"use strict";var i=s("5607"),a=s("2b0e");t["a"]=a["a"].extend({name:"rippleable",directives:{ripple:i["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}})},"6ca7":function(e,t,s){},ec29:function(e,t,s){},fe09:function(e,t,s){"use strict";s.d(t,"b",(function(){return o}));s("4de4"),s("45fc"),s("d3b7"),s("25f0");var i=s("c37a"),a=s("5311"),r=s("8547"),n=s("58df");function o(e){e.preventDefault()}t["a"]=Object(n["a"])(i["a"],a["a"],r["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data:function(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor:function(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple:function(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive:function(){var e=this,t=this.value,s=this.internalValue;return this.isMultiple?!!Array.isArray(s)&&s.some((function(s){return e.valueComparator(s,t)})):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,s):Boolean(s):this.valueComparator(s,this.trueValue)},isDirty:function(){return this.isActive},rippleState:function(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue:function(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel:function(){var e=i["a"].options.methods.genLabel.call(this);return e?(e.data.on={click:o},e):e},genInput:function(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:o},ref:"input"})},onBlur:function(){this.isFocused=!1},onClick:function(e){this.onChange(),this.$emit("click",e)},onChange:function(){var e=this;if(this.isInteractive){var t=this.value,s=this.internalValue;if(this.isMultiple){Array.isArray(s)||(s=[]);var i=s.length;s=s.filter((function(s){return!e.valueComparator(s,t)})),s.length===i&&s.push(t)}else s=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(s,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(s,t)?null:t:!s;this.validate(!0,s),this.internalValue=s,this.hasColor=s}},onFocus:function(){this.isFocused=!0},onKeydown:function(e){}}})}}]);
//# sourceMappingURL=chunk-16afe500.81d95c68.js.map